<!DOCTYPE html>
<html lang="ru" dir="ltr">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="color-scheme" content="light dark" />
    <title>–£—Å—Ç–∞–Ω–æ–≤–∫–∞ v2RayTun</title>

    <!-- Telegram WebApp SDK -->
    <script src="https://telegram.org/js/telegram-web-app.js" defer></script>

    <style>
      :root {
        --bg: var(--tg-theme-bg-color, #ffffff);
        --text: var(--tg-theme-text-color, #111827);
        --hint: var(--tg-theme-hint-color, #6b7280);
        --section: var(--tg-theme-section-bg-color, #f3f4f6);
        --button: var(--tg-theme-button-color, #2481cc);
        --button-text: var(--tg-theme-button-text-color, #ffffff);
        --border: color-mix(in oklab, var(--hint), #ffffff 75%);
        --radius-lg: 12px;
        --shadow-sm: 0 1px 3px rgba(0, 0, 0, 0.08);
      }

      @media (prefers-color-scheme: dark) {
        :root {
          --bg: var(--tg-theme-bg-color, #0b0f14);
          --text: var(--tg-theme-text-color, #e5e7eb);
          --hint: var(--tg-theme-hint-color, #9ca3af);
          --section: var(--tg-theme-section-bg-color, #111827);
          --button: var(--tg-theme-button-color, #2992e3);
          --button-text: var(--tg-theme-button-text-color, #ffffff);
          --border: #1f2937;
        }
      }

      * {
        box-sizing: border-box;
      }

      body {
        margin: 0;
        font: 16px/1.5 -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Helvetica, Arial, 'Apple Color Emoji','Segoe UI Emoji';
        background: var(--bg);
        color: var(--text);
        padding: 16px;
      }

      .container {
        max-width: 760px;
        margin: 0 auto;
      }

      header.header {
        text-align: center;
        margin-bottom: 24px;
        padding-bottom: 16px;
        border-bottom: 1px solid var(--border);
      }

      .app-icon {
        width: 72px;
        height: 72px;
        background: var(--button);
        border-radius: 20px;
        margin: 0 auto 12px;
        display: grid;
        place-items: center;
        color: #fff;
        font-weight: 800;
        font-size: 24px;
        box-shadow: var(--shadow-sm);
      }

      h1 {
        font-size: 22px;
        margin: 0 0 6px;
      }

      .subtitle {
        font-size: 14px;
        color: var(--hint);
      }

      .platform-selector {
        display: flex;
        gap: 6px;
        margin: 20px 0;
        background: var(--section);
        border-radius: var(--radius-lg);
        padding: 4px;
      }

      .platform-btn {
        flex: 1;
        padding: 10px 16px;
        border: 0;
        background: transparent;
        border-radius: 10px;
        font-size: 15px;
        font-weight: 600;
        cursor: pointer;
        color: var(--text);
      }

      .platform-btn[aria-selected="true"] {
        background: var(--bg);
        box-shadow: var(--shadow-sm);
      }

      main.instructions {
        display: grid;
        gap: 16px;
      }

      .step {
        padding: 16px;
        background: var(--section);
        border-radius: var(--radius-lg);
      }

      .step-header {
        display: flex;
        align-items: center;
        gap: 12px;
        margin-bottom: 12px;
      }

      .step-number {
        width: 28px;
        height: 28px;
        border-radius: 50%;
        background: var(--button);
        color: #fff;
        display: grid;
        place-items: center;
        font-size: 14px;
        font-weight: 700;
      }

      .step-title {
        font-size: 16px;
        font-weight: 700;
      }

      .step-content {
        font-size: 14px;
      }

      .step-content p {
        margin-bottom: 12px;
      }

      .step-content ul {
        margin-left: 20px;
        margin-bottom: 12px;
      }

      .screenshot-placeholder {
        width: min(100%, 300px);
        height: 520px;
        border-radius: 10px;
        margin: 12px auto;
        display: grid;
        place-content: center;
        gap: 6px;
        text-align: center;
        color: var(--hint);
        border: 1px dashed var(--border);
        background: var(--bg);
      }

      .screenshot-placeholder i {
        font-style: normal;
        font-size: 42px;
        opacity: 0.6;
      }

      .button-group {
        display: flex;
        flex-wrap: wrap;
        gap: 10px;
        margin-top: 12px;
      }

      .button {
        display: inline-flex;
        align-items: center;
        gap: 8px;
        padding: 10px 16px;
        background: var(--button);
        color: var(--button-text);
        text-decoration: none;
        border-radius: 10px;
        font-size: 14px;
        font-weight: 600;
        border: none;
        cursor: pointer;
        transition: opacity 0.2s ease;
      }

      .button:hover {
        opacity: 0.9;
      }

      .button.secondary {
        background: var(--bg);
        color: var(--text);
        border: 1px solid var(--border);
      }

      .note {
        background: rgba(255, 193, 7, 0.1);
        border-left: 3px solid #ffc107;
        padding: 12px;
        border-radius: 8px;
        margin: 12px 0;
        font-size: 14px;
      }

      .hidden {
        display: none;
      }

      footer.footer {
        text-align: center;
        padding: 16px 0;
        font-size: 13px;
        color: var(--hint);
        border-top: 1px solid var(--border);
        margin-top: 20px;
      }

      @media (max-width: 480px) {
        .button-group {
          flex-direction: column;
        }

        .button {
          justify-content: center;
        }
      }
    </style>
  </head>

  <body>
    <div class="container">
      <header class="header">
        <div class="app-icon" aria-hidden="true">V2</div>
        <h1>–£—Å—Ç–∞–Ω–æ–≤–∫–∞ v2RayTun</h1>
        <p class="subtitle">–ü—Ä–æ—Å—Ç–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –¥–ª—è Android –∏ iOS</p>
      </header>

      <div class="platform-selector" role="tablist" aria-label="–í—ã–±–æ—Ä –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã">
        <button
          id="tab-android"
          class="platform-btn"
          role="tab"
          aria-selected="true"
          aria-controls="panel-android"
          data-platform="android"
        >
          Android
        </button>
        <button
          id="tab-ios"
          class="platform-btn"
          role="tab"
          aria-selected="false"
          aria-controls="panel-ios"
          data-platform="ios"
        >
          iPhone
        </button>
      </div>

      <!-- Android -->
      <main id="panel-android" class="instructions" role="tabpanel" aria-labelledby="tab-android">
        <section class="step">
          <div class="step-header">
            <div class="step-number">1</div>
            <div class="step-title">–°–∫–∞—á–∞–π—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ</div>
          </div>
          <div class="step-content">
            <p>–°–∫–∞—á–∞–π—Ç–µ v2RayTun –∏–∑ Google Play –∏–ª–∏ –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω–æ–≥–æ GitHub —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è.</p>
            <div class="button-group">
              <a
                class="button"
                href="https://github.com/2dust/v2rayNG/releases"
                target="_blank"
                rel="noopener"
              >
                –°–∫–∞—á–∞—Ç—å —Å GitHub
              </a>
              <a
                class="button secondary"
                href="https://play.google.com/store/apps/details?id=com.v2raytun.android"
                target="_blank"
                rel="noopener"
              >
                Google Play
              </a>
            </div>
          </div>
        </section>

        <section class="step">
          <div class="step-header">
            <div class="step-number">2</div>
            <div class="step-title">–†–∞–∑—Ä–µ—à–∏—Ç–µ —É—Å—Ç–∞–Ω–æ–≤–∫—É</div>
          </div>
          <div class="step-content">
            <p>–ï—Å–ª–∏ —Å–∫–∞—á–∞–ª–∏ APK, —Ä–∞–∑—Ä–µ—à–∏—Ç–µ —É—Å—Ç–∞–Ω–æ–≤–∫—É –∏–∑ –Ω–µ–∏–∑–≤–µ—Å—Ç–Ω—ã—Ö –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤:</p>
            <p>–ù–∞—Å—Ç—Ä–æ–π–∫–∏ ‚Üí –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å ‚Üí –ù–µ–∏–∑–≤–µ—Å—Ç–Ω—ã–µ –∏—Å—Ç–æ—á–Ω–∏–∫–∏</p>
            <div class="screenshot-placeholder" aria-hidden="true">
              <i>üì±</i>
              <span>–°–∫—Ä–∏–Ω—à–æ—Ç –Ω–∞—Å—Ç—Ä–æ–µ–∫</span>
            </div>
            <div class="note">–£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–π—Ç–µ —Ç–æ–ª—å–∫–æ –∏–∑ –ø—Ä–æ–≤–µ—Ä–µ–Ω–Ω—ã—Ö –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤.</div>
          </div>
        </section>

        <section class="step">
          <div class="step-header">
            <div class="step-number">3</div>
            <div class="step-title">–ù–∞—Å—Ç—Ä–æ–π—Ç–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ</div>
          </div>
          <div class="step-content">
            <ul>
              <li>–î–æ–±–∞–≤—å—Ç–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é —Å–µ—Ä–≤–µ—Ä–∞.</li>
              <li>–ù–∞—Å—Ç—Ä–æ–π—Ç–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è.</li>
              <li>–†–∞–∑—Ä–µ—à–∏—Ç–µ —Å–æ–∑–¥–∞–Ω–∏–µ VPN-–ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è.</li>
            </ul>
          </div>
        </section>

        <section class="step">
          <div class="step-header">
            <div class="step-number">4</div>
            <div class="step-title">–ó–∞–ø—É—Å—Ç–∏—Ç–µ VPN</div>
          </div>
          <div class="step-content">
            <p>–ù–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∏ –ø–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç–µ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–µ VPN.</p>
            <div class="note">–î–æ–±–∞–≤—å—Ç–µ v2RayTun –≤ –∏—Å–∫–ª—é—á–µ–Ω–∏—è —ç–Ω–µ—Ä–≥–æ—Å–±–µ—Ä–µ–∂–µ–Ω–∏—è.</div>
          </div>
        </section>
      </main>

      <!-- iOS -->
      <main id="panel-ios" class="instructions hidden" role="tabpanel" aria-labelledby="tab-ios">
        <section class="step">
          <div class="step-header">
            <div class="step-number">1</div>
            <div class="step-title">–°–∫–∞—á–∞–π—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ</div>
          </div>
          <div class="step-content">
            <p>–£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ v2RayTun –∏–∑ App Store.</p>
            <div class="button-group">
              <a
                class="button"
                href="https://apps.apple.com/am/app/v2raytun/id6476628951"
                target="_blank"
                rel="noopener"
              >
                App Store
              </a>
            </div>
          </div>
        </section>

        <section class="step">
          <div class="step-header">
            <div class="step-number">2</div>
            <div class="step-title">–ù–∞—Å—Ç—Ä–æ–π—Ç–µ VPN-–ø—Ä–æ—Ñ–∏–ª—å</div>
          </div>
          <div class="step-content">
            <p>–ü–æ—Å–ª–µ —É—Å—Ç–∞–Ω–æ–≤–∫–∏ –ø–µ—Ä–µ–π–¥–∏—Ç–µ:</p>
            <p>–ù–∞—Å—Ç—Ä–æ–π–∫–∏ ‚Üí –û—Å–Ω–æ–≤–Ω—ã–µ ‚Üí VPN –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞–º–∏ ‚Üí –î–æ–±–∞–≤–∏—Ç—å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é VPN‚Ä¶</p>
          </div>
        </section>

        <section class="step">
          <div class="step-header">
            <div class="step-number">3</div>
            <div class="step-title">–ò–º–ø–æ—Ä—Ç–∏—Ä—É–π—Ç–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é</div>
          </div>
          <div class="step-content">
            <ul>
              <li>—á–µ—Ä–µ–∑ QR-–∫–æ–¥;</li>
              <li>–∏–∑ —Ñ–∞–π–ª–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏;</li>
              <li>–≤—Ä—É—á–Ω—É—é –≤–≤–µ–¥—è –ø–∞—Ä–∞–º–µ—Ç—Ä—ã.</li>
            </ul>
          </div>
        </section>

        <section class="step">
          <div class="step-header">
            <div class="step-number">4</div>
            <div class="step-title">–ê–∫—Ç–∏–≤–∏—Ä—É–π—Ç–µ VPN</div>
          </div>
          <div class="step-content">
            <p>–í–µ—Ä–Ω–∏—Ç–µ—Å—å –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∏ –≤–∫–ª—é—á–∏—Ç–µ VPN. –ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç–µ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–µ —Å–∏—Å—Ç–µ–º—ã.</p>
            <div class="note">–ù–∞ iOS VPN –º–æ–∂–µ—Ç –æ—Ç–∫–ª—é—á–∞—Ç—å—Å—è –ø—Ä–∏ –±–ª–æ–∫–∏—Ä–æ–≤–∫–µ —ç–∫—Ä–∞–Ω–∞.</div>
          </div>
        </section>
      </main>

      <footer class="footer">
        <p>v2RayTun Installation Guide</p>
      </footer>
    </div>

    <script>
      function initTG() {
        try {
          if (window.Telegram && window.Telegram.WebApp) {
            window.Telegram.WebApp.expand?.();
          }
        } catch (_) {}
      }

      function initTabs() {
        const tablist = document.querySelector('.platform-selector');
        if (!tablist) return;

        const tabs = Array.from(tablist.querySelectorAll('[role="tab"]'));
        const panels = {
          android: document.getElementById('panel-android'),
          ios: document.getElementById('panel-ios')
        };

        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã
        function selectPlatform(platform) {
          tabs.forEach((btn) => {
            const isActive = btn.dataset.platform === platform;
            btn.setAttribute('aria-selected', String(isActive));
          });
          panels.android.classList.toggle('hidden', platform !== 'android');
          panels.ios.classList.toggle('hidden', platform !== 'ios');
          try {
            window.Telegram?.WebApp?.HapticFeedback?.impactOccurred('light');
          } catch (_) {}
        }

        // –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –∫–ª–∏–∫–∞ –ø–æ –∫–Ω–æ–ø–∫–∞–º
        tablist.addEventListener('click', (e) => {
          const btn = e.target.closest('[role="tab"]');
          if (!btn) return;
          selectPlatform(btn.dataset.platform);
        });

        // –ê–≤—Ç–æ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã —Ç–æ–ª—å–∫–æ –ø—Ä–∏ –ø–µ—Ä–≤–æ–π –∑–∞–≥—Ä—É–∑–∫–µ
        // (–µ—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –µ—â–µ –Ω–µ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–æ–≤–∞–ª —Å –ø–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª–µ–º)
        if (!sessionStorage.getItem('platformSelected')) {
          const ua = navigator.userAgent.toLowerCase();
          const detected = /iphone|ipad|ipod/.test(ua) ? 'ios' : 'android';
          selectPlatform(detected);
        }
        
        // –°–æ—Ö—Ä–∞–Ω—è–µ–º –≤—ã–±–æ—Ä –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤ sessionStorage
        tablist.addEventListener('click', () => {
          sessionStorage.setItem('platformSelected', 'true');
        });
      }

      if (document.readyState === 'loading') {
        document.addEventListener('DOMContentLoaded', () => {
          initTG();
          initTabs();
        });
      } else {
        initTG();
        initTabs();
      }
    </script>
  </body>
</html>